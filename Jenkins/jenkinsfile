pipeline
{
	agent 
	{
		docker
		{
			image 'androidsdk/android-31:latest'
			reuseNode true            
	  	}
	}
	stages
	{ 
		stage('Build')
		{
			steps 
			{
				sh "echo 123"
			}
		}
	 	stage('Log the Jenkins Docker Ant Git and Java version info')
		{
			steps 
			{
			sh 'java -version'
			sh 'git --version'
			}
		}
		    stage('Test') {
      steps {
        sh(script: './mvnw --batch-mode -Dmaven.test.failure.ignore=true test')

      }
    }
    stage('Package') {
      steps {
        sh(script: './mvnw --batch-mode package -DskipTests')
      }
    }
	}
	post 
	{
        always 
		{
            archiveArtifacts artifacts: 'build/libs/**/*.jar', fingerprint: true
            junit 'build/reports/**/*.xml'
        }
    }
}
