pipeline
{
	agent 
	{
		docker 
		{
			image 'androidsdk/android-31:latest'
			reuseNode true            
        }
	}
	

	stages
	{
		stage('Log the Jenkins Docker Ant Git and Java version info')
		{
			steps 
			{
				sh 'java -version'
				sh 'git --version'
			}
		}
	}
	
	
	agent none
         stages {
            stage('Build') {
                agent {
                    docker { image 'python:3.8' }
                }
                steps {

                        withEnv(["HOME=${env.WORKSPACE}"]){
                                dir("SecureCity"){
									sh 'python3 -m pip install --upgrade pip setuptools wheel'
									sh 'pip3 install -r requirements.txt'
									sh 'python main.py'
                                }
                        }
                }
			}
		}
}

