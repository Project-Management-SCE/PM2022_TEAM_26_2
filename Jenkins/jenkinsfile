pipeline 
{
	agent none
	stages 
	{
		stage('Build Java') 
		{
			agent 
			{
				docker 
				{ 
					image 'androidsdk/android-31:latest'
					reuseNode true  
				}
			}
			steps 
			{
				sh 'java -version'
				sh 'git --version'
			}
		}
		
		stage('Java Test')
		{
			agent 
			{
				docker 
				{ 
					image 'androidsdk/android-31:latest'
					reuseNode true  
				}
			}
			steps 
			{
				sh 'junit app/src/test/java/com/example/ymdbanking/ExampleUnitTest.java'
			}			
		}
		
		stage('Build Python') 
		{
			agent 
			{
				docker 
				{ 
					image 'python:3.8' 
				}
			}
			steps 
			{
				withEnv(["HOME=${env.WORKSPACE}"])
				{
					sh 'python3 -m pip install --upgrade pip setuptools wheel'
					sh 'pip3 install -r requirements.txt'
					sh 'python main.py'
				}
			}
		}
	}
}
		
		
		
		
